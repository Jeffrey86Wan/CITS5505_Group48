{% extends "components/auth_base.html" %} {% block title %}已登出 -
ExpenseManager{% endblock %} {% block content %}
<div class="auth-container text-center">
  <div class="auth-header">
    <h1>Logged out successfully</h1>
    <p>You have been logged out of the system.</p>
  </div>

  <!-- ✅ FLASH MESSAGE BLOCK -->
  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %}
  <div class="mb-4">
    {% for category, message in messages %}
    <div
      class="flash-message-auto-disappear p-2 rounded {% if category == 'success' %} bg-green-100 text-green-800 border border-green-400 {% else %} bg-red-100 text-red-800 border border-red-400 {% endif %}"
    >
      {{ message }}
    </div>
    {% endfor %}
  </div>
  {% endif %} {% endwith %}
  <!-- ✅ END FLASH BLOCK -->

  <div class="mt-4">
    <p>Redirecting to login page...</p>
    <a href="{{ url_for('auth.login') }}" class="btn btn-primary mt-2"
      >Go to login page immediately</a
    >
  </div>
</div>

<script>
  // Prevent access to previous pages using the browser back button
  window.history.pushState(null, "", window.location.href);
  window.onpopstate = function () {
    window.history.pushState(null, "", window.location.href);
  };

  // Clear browser history cache
  window.onload = function () {
    if (
      window.performance &&
      window.performance.navigation.type ===
        window.performance.navigation.TYPE_BACK_FORWARD
    ) {
      window.location.replace("{{ url_for('auth.login') }}");
    }
  };

  // Add cache browser disable header
  document.addEventListener("DOMContentLoaded", function () {
    // Redirect to login page after 2 seconds
    setTimeout(function () {
      window.location.href = "{{ url_for('auth.login') }}";
    }, 2000);
  });
</script>
{% endblock %}
